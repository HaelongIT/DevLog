<div class="row justify-content-center">
    <div class="col-lg-10">
        <div class="card shadow-sm">
            <div class="card-header bg-light d-flex justify-content-between align-items-center">
                <h2 id="board-title" class="h4 mb-0"></h2>
                <small id="board-author" class="text-muted"></small>
            </div>
            <div class="card-body">
                <div id="board-content" style="min-height: 200px; white-space: pre-wrap;">
                    <!-- pre-wrap: 공백과 줄바꿈을 그대로 표시 -->
                </div>
            </div>
            <div class="card-footer d-flex justify-content-end">
                <a href="#/" class="btn btn-secondary me-2">목록으로</a>
                <!-- 수정 버튼 활성화 및 링크 추가 -->
                <button id="edit-btn" class="btn btn-warning me-2">수정</button>
                <button class="btn btn-danger" disabled>삭제</button>
            </div>
        </div>
    </div>
</div>

<script>
    function loadBoardDetail() {
        // URL 해시에서 게시글 ID를 추출합니다. (예: #/board/1 -> 1)
        const pathParts = window.location.hash.split('/');
        const boardId = pathParts[pathParts.length - 1];

        if (!boardId || isNaN(boardId)) {
            alert('유효하지 않은 게시글 ID입니다.');
            window.location.hash = '#/';
            return;
        }

        $.ajax({
            url: `/api/boards/${boardId}`,
            type: 'GET',
            success: function(data) {
                $('#board-title').text(data.title);
                $('#board-author').text(`작성자: ${data.author}`);
                $('#board-content').text(data.content);
                $('#edit-btn').on('click', function() {
                    window.location.hash = `#/edit/${data.id}`;
                });
            },
            error: function(err) {
                alert(err.responseJSON?.message || '게시글을 불러오는데 실패했습니다.');
                window.location.hash = '#/';
            }
        });
    }

    // 이 스크립트가 로드되는 즉시 함수 실행
    loadBoardDetail();
</script>
