<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SPA 게시판</title>
    <!-- Bootstrap CSS CDN -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Bootstrap Icons CDN -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <style>
        body {
            padding-top: 56px;
            background-color: #f8f9fa;
        }
    </style>
</head>
<body>

<!-- 고정 네비게이션 바 -->
<nav class="navbar navbar-expand-lg navbar-dark bg-dark fixed-top shadow-sm">
    <div class="container">
        <!-- 목록 페이지로 이동하는 링크 -->
        <a class="navbar-brand" href="#/"><i class="bi bi-card-text"></i> SPA 게시판</a>
    </div>
</nav>

<!-- 동적 컨텐츠가 렌더링될 메인 영역 -->
<main id="main-content" class="container mt-5">
    <!-- 이 곳의 내용이 URL에 따라 바뀝니다. -->
</main>

<!-- jQuery CDN -->
<script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
<!-- Bootstrap JS, Popper.js CDN -->
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.min.js"></script>

<!-- 라우팅 및 페이지 로드 스크립트 -->
<script>
    // 페이지의 컨텐츠를 동적으로 로드하고 스크립트를 실행하는 함수
    function loadPage(pageUrl) {
        // jQuery의 load() 함수를 사용하여 #main-content 영역에 pageUrl의 내용을 불러옵니다.
        // 콜백 함수를 통해 로드가 완료된 후 해당 페이지의 스크립트를 실행합니다.
        $('#main-content').load(pageUrl);
    }

    // 간단한 해시 기반 라우터 함수
    function router() {
        const path = window.location.hash.substring(1) || '/';

        // 상세 보기 경로를 위한 정규식 체크 (예: /board/1, /board/12)
        const detailPageRegex = /^\/board\/(\d+)$/;
        const match = path.match(detailPageRegex);

        if (match) {
            // URL이 /board/숫자 형태와 일치하면
            loadPage('/pages/detail.html');
        } else {
            // 기존 switch 문
            switch (path) {
                case '/':
                    loadPage('/pages/list.html');
                    break;
                case '/write':
                    loadPage('/pages/write.html');
                    break;
                default:
                    $('#main-content').html('<div class="text-center"><h2>404 Not Found</h2><p>페이지를 찾을 수 없습니다.</p></div>');
                    break;
            }
        }
    }

    // 브라우저의 해시(주소창의 # 부분)가 변경될 때마다 라우터 함수를 실행
    // (예: 링크 클릭, 뒤로/앞으로 가기 버튼)
    window.addEventListener('hashchange', router);

    // 페이지가 처음 로드될 때도 라우터 함수를 실행
    window.addEventListener('DOMContentLoaded', router);
</script>
</body>
</html>

